(function(n){var m=window.AmazonUIPageJS||window.P,t=m._namespace||m.attributeErrors,g=t?t("DetailPageImageBlockAssets"):m;g.guardFatal?g.guardFatal(n)(g,window):g.execute(function(){n(g,window)})})(function(n,m,t){n.register("postMetric",function(){return{postCountMetric:function(g){if("undefined"!==typeof g){var a=m.ue;if(a){var c=a.count(g)||0;a.count(g,c+1)}}},postTimeMetric:function(g,a){if("undefined"!==typeof g&&"undefined"!==typeof a){var c=m.ue;c&&c.count(g,a)}}}});n.register("logFailedInteractionMetric",
function(){return{isEnabled:!1}});n.register("postEarlyMetric",function(){return null});n.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(g,a,c,d){g=g.extend(!0,{},c,d);var b=new a(g);n.register("ImageBlockAPI",function(){return b.api});return b});n.when("A","jQuery","ImageBlockBTF").register("ImageBlockAiryLoader",function(g,a,c){g=c.airyConfig;g.jsUrl&&n.load.js(g.jsUrl);g.cssUrl&&n.load.css(g.cssUrl)});
n.when("A","jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(g,a,c,d,b,f){var e={};return function(g){var h=this;h.dispatch=function(c,d){var f=e[c];b.isDefined(f)&&a.each(f,function(a,b){b.call(m,d)})};h.register=function(a,c){b.isDefined(e[a])||(e[a]=[]);"function"===typeof c&&e[a].push(c)};h.model=new c(g,h);h.view=new d(g,h,h.model);h.api=new f(g,h,h.model);h.init=function(){h.model.init();h.view.init()};h.init()}});
n.when("A","jQuery","imageBlockUtils").register("ImageBlockModel",function(g,a,c){function d(a,b,d,e,f){c.isDefined(a)&&(p.type=a);c.isDefined(b)&&(p.index=b);c.isDefined(d)&&(p.thumbnailIndex=d);c.isDefined(e)&&(p.variant=e);c.isDefined(f)&&(p.color=f)}function b(a){d("image",0,0,"MAIN",a||h.landingAsinColor||h.defaultColor)}function f(a){a=a.data;m=g.copy(p);d(a.type,a.index,a.thumbnailIndex,a.variant,a.color)}function e(a){f(a);a=g.copy(a);a.data=g.copy(p);k.dispatch("updateView",a)}function l(){m=
g.copy(p);b(p.color)}var h,k,p={},m={},n,t;return function(a,c){k=c;h=a;k.register("updateSelection",e);k.register("updateModel",f);k.register("resetModel",l);this.init=function(){b()};this.getCurrentItem=function(){return g.copy(p)};this.getPreviousItem=function(){return g.copy(m)};this.setCurrentEvent=function(a){n=a};this.getCurrentEvent=function(){return n};this.setImmersiveViewModalInstance=function(a){t=a};this.getImmersiveViewModalInstance=function(){return t}}});n.when("ImageBlockBTF",
"postMetric").execute(function(g,a){function c(a,c,d,g,h){function k(a){"click"===a.type&&g.postCountMetric("thumbClick");"click"===a.type&&B.overrideAltImageClickAction?z.dispatch("thumbActionClick",a):z.dispatch("updateSelection",a)}function p(a){B.useClickZoom||z.dispatch("imageClick",a)}function q(a){B.useClickZoom||z.dispatch("imageHover",a)}function n(a){z.dispatch("button360Click",a)}function t(c){!d.isDefined(c)||"swatchClick"!==c.type&&"updatedData"!==c.type?(A.update(c),"swatchHover"!==
c.type&&G.getPreviousItem().thumbnailIndex!==c.data.thumbnailIndex&&g.postCountMetric(c.data.type+"ThumbnailSelected"),a.trigger("image-block-thumbnail-selected",c.data)):A.render(c.data.color,!1,c.onload)}function x(a){z.dispatch("resize",a)}function D(a){d.selectThumbnail(a,u)}function v(a){var b=a.data,c;b&&"ingress"!==b.type&&"click"===a.type&&(c=a);return c}function E(a){var b=G.getCurrentItem(),c={type:"click"};c.$declarativeParent=a;c.data=b;return c}var A,B,z,G,u;return function(d,e,g){A=
this;B=d;z=e;G=g;u=c("#imageBlock #altImages ul");var l=c("#imageBlock .canvas"),w=c("#main-image-container"),F;A.subViews=[];for(e=0;e<h.length;e++)A.subViews.push(new h[e](d,g,A,z));A.render=function(a,b,d){var e=0;u.find(".item").remove();a=a||G.getCurrentItem().color;c.each(A.subViews,function(c,f){e=f.render(a,e,l,u,w,b,d)||e});var g=u.find(".a-button-selected").closest(".a-declarative");F=E(g)};A.init=function(){u=c("#imageBlock #altImages ul");var d=u.find(".a-button-selected").closest(".a-declarative"),
e=d.data("action"),d=d.data(e)||{};d.color=B.landingAsinColor||B.defaultColor;z.dispatch("updateModel",{data:d});A.render(d.color,!0);B.isDebug&&m.console&&console.log(B);z.register("updateView",t);z.register("selectThumbnail",D);B.disableHoverOnAltImages||a.declarative("thumb-action",["mouseenter","mouseleave"],k);a.declarative("thumb-action",["click"],k);a.declarative("main-image-click",["click"],p);a.declarative("main-image-click",["mouseenter","mouseleave"],q);a.declarative("button-360-click",
["click"],n);c(m).resize(x)};A.update=function(a){c.each(A.subViews,function(b,c){c.update(a)});B.usePeekHover&&("mouseleave"===a.type?z.dispatch("updateSelection",F):"click"===a.type&&(F=v(a)||F))}}}var d=["A","jQuery","imageBlockUtils","postMetric"].concat(g.views);n.when.apply(n,d).register("ImageBlockView",function(){for(var a=arguments[0],d=arguments[1],e=arguments[2],g=arguments[3],h=[],k=4,p=arguments.length;k<p;k++)h.push(arguments[k]);return c(a,d,e,g,h)})});n.when("A","jQuery",
"imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(g,a,c,d,b,f,e){function l(b,d,e,f){if(!c.isjQueryObjDefined(b.find(".a-button-selected"))){var g=r.getCurrentItem();if(!f||"chromeless-video"!==g.type||!u.autoplayVideo){f=0;"image"===g.type&&(f=Math.max(p(g.color,g.variant),0));var h=d+f;h>=e&&(f=0,h=d);d=c.getImageHash(g.color,f,u);-1!==d&&(H.dispatch("updateModel",{data:{index:f,thumbnailIndex:h,variant:d.variant,
type:"image"}}),d=b.find(".item").get(h),c.selectGivenThumbnail(a(d),b))}}}function h(b,d,g){d=u.colorImages&&u.colorImages[d];var h=b;c.isDefined(d)&&(a.each(d,function(a,d){b<u.maxAlts&&(c.createThumbnail({type:"image",index:a,thumbnailIndex:b,variant:d.variant},d.thumb,I,"imageThumbnail"),b++)}),f.isEnabled&&e.logAltImgRequestPlacedOnThumbnails(a,f,r),l(I,h,b,g));return b}function k(b,c){if("image"===b.type){var d=a("#image-canvas-caption #canvasCaption"),e,f=u.staticStrings,g=u.colorImages,h=
b.color,k=b.index;c&&u.useIV?e=f.clickToExpand:g[h]&&g[h][k].hiRes&&u.useHoverZoom?(e=u.useHoverZoomIpad?f.touchToZoom:u.useClickZoom?f.clickToZoom:f.rollOverToZoom,u.hoverZoomIndicator&&(e="<img src='"+u.staticImages.hoverZoomIcon+"'/>&nbsp;"+e)):u.useIV&&(e=f.clickToExpand);d.html(e)}}function p(a,b){return c.getIndexForVariant(a,b,u)}function m(b,d){var e;a.each(b.main,function(a,b){c.isDefined(e)||(e=parseFloat(b[1]/b[0])<=parseFloat(u.holderRatio)?"a-stretch-vertical":"a-stretch-horizontal")});
var f="a-dynamic-image "+e,g=c.getMaxDimensionsOfMainImage(b.main,w,u),h=g[0],k=g[1],g=a("<div></div>"),h={"max-height":h,"max-width":k};g.addClass(f).css(h).attr({"data-old-hires":b.hiRes,"data-a-manual-replacement":"true",onload:d}).data("a-dynamic-image",b.main);return g}function t(a){var b=M.find(".swatchHoverExp");a=m(a);b.find(".imgTagWrapper").html(a);g.loadImageManually(a);return b}function Q(a){var b=w.css("height");null!==b&&a.find(".imgTagWrapper").css("height",b);a.addClass("selected");
u.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(u.imgTagWrapperClasses)}function x(a,d){if("image"===a.type||"unavailable"===a.type||"lazy-loaded"===a.type){var h=c.getImageHash(a.color,a.index,u);if(-1===h)return h={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},c.lazyLoadingRequired(a,r,u)?E(a,!1,d):(H.dispatch("updateModel",h),c.showUnavailable(a.color)),-1;var l=M.find(".item.itemNo"+a.thumbnailIndex);if(!c.isjQueryObjDefined(l)){var l=a.thumbnailIndex,l=M.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+
l+" maintain-height"),p=m(h,d);l.find(".placeHolder").replaceWith(p);M.find(".list").append(l);g.loadImageManually(p)}Q(l);H.dispatch("loadMagnifier");k(a);u.useIV&&c.isDefined(h.hiRes)&&l.css("cursor","pointer");a.isUserGenerated&&(l=r.getPreviousItem(),p=a.variant,c.isDefined(p)&&l.thumbnailIndex!==a.thumbnailIndex&&(f.isEnabled&&e.logAltImgRequestServed(f),b.postCountMetric("ImageThumbnailSelectedVariant:"+p),0===p.indexOf("IG")&&(b.postCountMetric("IGImageSelectedVariant:"+p),b.postCountMetric("IGImageSelectedEvent:"+
a.interaction))));g.trigger("dp:image-block:update",h)}}function D(a){var b=Math.max(p(a.color,r.getCurrentItem().variant),0),b=c.getImageHash(a.color,b,u);if(-1===b)return c.lazyLoadingRequired(a,r,u)?c.lazyLoadOnHoverEnabled(u)&&(v(".3",!0),c.spinner(M,!0),g.delay(function(){r.getCurrentEvent().data===a&&E(a,!0)},500)):c.showUnavailable(a.color),-1;var d=t(b);Q(d);g.trigger("dp:image-block:update",b)}function v(b,c){c?M.css("opacity",b):a("#imageBlock").css("opacity",b)}function E(a,b,e){F=b;P=
e;var f=a.color,g=u.colorToAsin[f];if(g&&g.asin){var h={};h.params={asin:g.asin,productGroupID:u.productGroupID,color:f};h.success=function(d){d?(c.ajaxState(g.asin,"success"),u.colorImages[f]=d.colorImage,c.isDefined(u.spin360ColorEnabled)&&(u.spin360ColorEnabled[f]=d.enable360),f===a.color&&(b&&F?a===r.getCurrentEvent().data&&(A(a),D(a)):(d={type:"updatedData",data:r.getCurrentItem(),onload:e||P},H.dispatch("updateView",d))),n.register(c.rankedImagesReadyEvent(g.asin))):c.ajaxState(g.asin,"fail")};
h.error=function(){c.ajaxState(g.asin,"fail")};h.indicator=c.spinner(M);c.ajaxState(g.asin,void 0)&&"fail"!==c.ajaxState(g.asin,void 0)||(v(".3",b),d.load("/gp/product/features/apparel-main-image/ranked-images.html",h),c.ajaxState(g.asin,"sent"));return u.colorImages&&u.colorImages[f]}}function A(b,d){c.lazyLoadingRequired(b,r,u)||(a("#imageBlock").css("opacity","1"),M.css("opacity","1"),c.spinner(M,!1),M.find("li").removeClass("selected"),a("#image-canvas-caption #canvasCaption").empty(),c.hideUnavailable(),
d&&M.find(".list .item").remove())}function B(){var b=M.find(".item .imgTagWrapper"),d=c.getContainerHeight(w,u.holderRatio,u.holderMaxHeight);0<d&&(w.height(d),b.height(d));M.find("img.a-dynamic-image").each(function(){var b=a(this);b.data("a-manual-replacement")&&g.loadDynamicImage(this);var d=b.data("a-dynamic-image"),d=c.getMaxDimensionsOfMainImage(d,w,u);b.css({"max-height":d[0]+"px","max-width":d[1]+"px"})})}function z(a){k(r.getCurrentItem(),"mouseenter"===a.type)}var G,u,r,H,I,M,w,F,P,y;return function(a,
d,e,f){G=this;u=a;r=d;H=f;u.colorImages[u.landingAsinColor]=u.colorImages[u.defaultColor];G.render=function(a,b,d,e,f,g,k){M=d;I=e;w=f;y=h(b,a,g);g||(a=r.getCurrentItem(),c.lazyLoadingRequired(a,r,u)&&H.dispatch("updateModel",{data:{type:"lazy-loaded"}}));A(r.getCurrentItem(),!g);x(r.getCurrentItem(),k);return y};G.update=function(a){var d=a.data;r.setCurrentEvent(a);"ingress"!==d.type&&A(a.data,!1);"swatchHover"===a.type?d.color===r.getCurrentItem().color?x(r.getCurrentItem()):a.captured||-1===D(d)||
(a.captured=!0):"image"===d.type&&(d.interaction=a.type,d.isUserGenerated=!0,"mouseenter"===a.type&&b.postCountMetric("dpcc_imageThumbHovered_"+(d.thumbnailIndex+1)+"_"+y),x(d),u.usePeekHover&&"click"!==a.type||(c.selectGivenThumbnail(a.$declarativeParent,I),"click"===a.type&&b.postCountMetric("dpcc_imageThumbClicked_"+(d.thumbnailIndex+1)+"_"+y)))};H.register("imageHover",z);H.register("resize",B)}});n.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",
function(g,a,c,d,b,f){function e(a){v?a.css("cursor","url('"+q.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function l(a){var b=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(c.isDefined(b))for(var b=b[1].split("_"),d=0;d<b.length;d++){var e=b[d].match(/^([A-Z]+)(\d+(\.\d+)?)$/);c.isDefined(e)&&(a[e[1]]=parseInt(e[2],10))}return a}function h(g,h){function k(){var a;h.useClickZoom?(a=h.offsetInClickZoom,a=[Math.min(1,
Math.max(0,P[0]-(N[0]+a))/(N[2]-2*a)),Math.min(1,Math.max(0,P[1]-(N[1]+a))/(N[3]-2*a))]):a=F&&F.updatePosition();if(a&&w&&w.detailSize){var b=[w.detailSize[0]-w.rect.width,w.detailSize[1]-w.rect.height];w.detailImage.get(0).style.left=-(a[0]*b[0])+"px";w.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function p(a){var b=U?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:"";P=U?[b.pageX,b.pageY]:[a.pageX,a.pageY]}function n(a){U&&a.preventDefault();p(a);h.useClickZoom?a=[N[0],N[1],N[0]+
N[2],N[1]+N[3]]:(a=F?F.offset:g.offsetParent().offset(),a=[y[0]+a.left,y[1]+a.top,y[0]+y[2]+a.left,y[1]+y[3]+a.top]);P[0]<a[0]||P[1]<a[1]||P[0]>=a[2]||P[1]>=a[3]?(h.fadeMagnifier?ga||(ga=!0,na=setTimeout(function(){u(!0)},500)):h.useClickZoom||u(),ma&&(ma=!1,clearTimeout(da))):(ma||(ma=!0,da=setTimeout(function(){d.postCountMetric("dppc_hoverZoomOpened");b.isEnabled&&f.logHoverZoomRequestServed(b)},1E3)),h.fadeMagnifier&&ga&&(ga=!1,clearTimeout(na)),k())}function u(b){b&&t.suppressMagnifier(!0);if(Q&&
(w&&w.hide(),F&&(F.destroy(),F=null),Q=!1,U?(g.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),a(document).trigger("disengaged.magnifier")):a(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),x(),b))g.one("click.magnifier touchstart.magnifier",function(a){r(a,!0)})}function r(b,c){c&&t.suppressMagnifier(!1);if(!Q&&!S&&(0===X&&(d.postCountMetric("dppc_hoverTime",new Date-(m.ue&&m.ue.t0||0)),X=1),aa[Y]||(d.postCountMetric("dppc_hoverMain"),aa[Y]=1),y=[g.position().left,
g.position().top,g.width(),g.height()],Y&&(p(b),w?w.refit().show():w=new oa,h.useClickZoom||(F=F||new fa),N=w.getWindowSize(),k()),Q=!0,U?(g.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",n).bind("touchend.magnifier",u),a(document).trigger("engaged.magnifier")):(g.unbind("mousemove.magnifier"),a(document).trigger("engaged.magnifier").bind("mousemove.magnifier",n)),c)){var e=a("#zoomWindow");if(0<e.length)e.one("click.magnifier touchend.magnifier",function(a){u(!0)})}}
function x(){h.useHoverZoom&&(U?g.bind("touchstart.magnifier touchmove.magnifier",r):g.bind("mousemove.magnifier",r))}var t=this,D={detailImageUrl:g.attr("data-old-hires"),location:"over",locationElement:g,prelaod:"ready",zIndex:50,offsetInClickZoom:50};h=a.extend(D,h);h.adjustment=[10,0,-10,0];var w=null,F=null,P=null,y=null,N=null,K={"null":1,"":1,undefined:1},Q=!1,S=!1,Y=h.detailImageUrl,U=h.useHoverZoomIpad||0,X=0,aa={},fa=function(){function b(a){var c=Math.round(Math.min(g.width(),w.rect.width/
a));a=Math.round(Math.min(g.height(),w.rect.height/a));l.css({width:c,height:a});d=[c,a]}var c=this,d=[0,0],f=(w.detailSize&&w.detailSize[0]||5E8)/y[2],k=(w.detailSize&&w.detailSize[1]||5E8)/y[3],f=k>f?k:f;a("#magnifierLens").remove();var l=a("<div id='magnifierLens' />").css({backgroundImage:"url("+h.generalImageUrls.zoomLensBackground+")",position:"absolute"});q.showMagnifierOnHover?e(l):l.css("cursor","pointer");c.updatePosition=function(){var a=[y[2]-d[0],y[3]-d[1]],b=0>=a[0]?.5:Math.max(0,Math.min(1,
(P[0]-d[0]/2-y[0]-c.offset.left)/a[0])),e=0>=a[1]?.5:Math.max(0,Math.min(1,(P[1]-d[1]/2-y[1]-c.offset.top)/a[1])),f=y[0]+Math.round(b*a[0]),a=y[1]+Math.round(e*a[1]);l.get(0).style.left=f+"px";l.get(0).style.top=a+"px";return[b,e]};c.destroy=function(){l.remove()};c.offset=g.offsetParent().offset();b(f);c.updatePosition();l.appendTo(g.parent());w.detailImage[0].complete||w.detailImage.load(function(){var a=w.detailImage.width()/y[2];b(a);c.updatePosition()})};fa.preload=function(){t.preload(h.generalImageUrls.lensBackgroundUrl)};
var oa=function(){function b(){var d={};if("over"===h.location){var d=h.useClickZoom,k={},l=a("#leftCol"),p=a("#centerCol"),n=a("#rightCol"),w=a("#hover-zoom-end"),r=a("#actionPanelContainer"),u=c.isjQueryObjDefined(l)?l.outerHeight():p.outerHeight();k.top=c.isjQueryObjDefined(l)?l.offset().top:p.offset().top;k.bottom=u+k.top;k.right=c.isjQueryObjDefined(n)?n.offset().left:r.offset().left;k.left=d?0:l.offset().left+l.outerWidth();c.isjQueryObjDefined(w)&&w.offset().top>k.bottom&&(k.bottom=w.offset().top);
d=k}else"right"===h.location&&(d=g.offset(),d={left:d.left+g.outerWidth(),top:d.top,right:d.left+g.outerWidth()+400,bottom:d.top+400});h.minHeightElement&&(d.bottom=Math.max(d.bottom,d.top+a(h.minHeightElement).outerHeight()));d.bottom=Math.min(d.bottom,a(m).scrollTop()+a(m).height());d.left+=f[0];d.top+=f[1];d.right+=f[2];d.bottom+=f[3];d.width=d.right-d.left;d.height=d.bottom-d.top;h.enhancedHoverOverlay&&c.isDefined(m.pageXOffset)&&(k=a(m).width(),d.width=k-d.left+m.pageXOffset-18,d.height-=14);
q.css({left:d.left,top:d.top,width:d.width,height:d.height});e.rect=d;return e}function d(a){var b=new Image;e.detailSize=[0,0];b.onload=function(){e.detailSize=[b.width,b.height];k()};b.src=a.attr("src");if(0<b.width&&0<b.height)e.detailSize=[b.width,b.height];else if(h.detailImageSize)e.detailSize=h.detailImageSize;else{a=l(b.src);var c=y[2]/y[3];a.SS||a.AA?(a=a.SS||a.AA,e.detailSize=[a,a]):a.SX?e.detailSize=[a.SX,Math.round(a.SX/c)]:a.SY?e.detailSize=[Math.round(a.SY*c),a.SY]:a.SL&&(e.detailSize=
1<=c?[a.SL,Math.round(a.SL/c)]:[Math.round(a.SL*c),a.SL])}}var e=this,f=h.adjustment;a("#zoomWindow").remove();var p={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:h.zIndex};h.enhancedHoverOverlay&&(p.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",p.border="1px solid #949494",p.borderColor="rgb(148,148,148)");var q=a("<div id='zoomWindow' />").css(p);h.fadeMagnifier&&q.fadeIn(200);h.useClickZoom&&(v?q.css("cursor",'url("'+h.zoomOutIcon+'"), auto'):(q.css("cursor","-webkit-zoom-out"),
q.css("cursor","-moz-zoom-out"),q.css("cursor","zoom-out")));e.updateImage=function(b){b=a("<img id='detailImg' src='"+b+"'/>").css("position","absolute");e.detailImage&&e.detailImage.remove();q.append(b);a(document).trigger("updated.magnifier");e.detailImage=b;d(e.detailImage)};e.refit=function(){b();d(e.detailImage);return e};h.fadeMagnifier?(e.show=function(){q.fadeIn(200);return e},e.hide=function(){q.fadeOut(200);return e}):(e.show=function(){q.show();return e},e.hide=function(){q.hide();return e});
e.destroy=function(){q.remove();return e};e.getWindowSize=function(){return[e.rect.left,e.rect.top,e.rect.width,e.rect.height]};e.updateImage(Y);b();q.appendTo(document.body)},ga=!1,na,ma=!1,da;t.preload=function(b){b=a.makeArray(b);for(var c=b.length,d=0;d<c;d++)b[d]instanceof Array?t.preload(b[d]):"string"===typeof b[d]&&b[d]&&!K[b[d]]&&(K[b[d]]=new Image,K[b[d]].src=b[d])};t.changeImage=function(b,c){Q&&u();Y=c;g.attr("src",b);t.preload(b);y=[g.position().left,g.position().top,g.width(),g.height()];
c&&("immediately"===h.preload?t.preload(c,!0):a(m).ready(function(){t.preload(c)}),w?w.updateImage(c):g.attr("data-old-hires",c))};t.destroy=function(){g.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");a(document).unbind("mousemove.magnifier");F&&F.destroy();F=null;w&&w.destroy();w=null};t.detailImage=function(){return w.detailImage};t.suppressMagnifier=function(a){S=a};t.isEngaged=function(){return Q};t.engageMagnifier=r;t.disengageMagnifier=u;g[0].complete?x():
g.one("load",x);t.preload(g.attr("src"));if(h.preload){var ka=h.detailImageUrl,D=function(){t.preload(ka,!0);h.useClickZoom||fa.preload()},W=h.preload;W.constructor!==Array&&(W=[W]);for(var ca=0;ca<W.length;ca++)if("immediately"===W[ca])D();else if(a(m)[W[ca]])a(m)[W[ca]](D);else a(m).bind(W[ca],D)}return t}function k(){if(q.useHoverZoom){var d={adjustment:[0,0,1,1],generalImageUrls:q.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:190,useHoverZoomIpad:q.useHoverZoomIpad,
useHoverZoom:q.useHoverZoom,useClickZoom:q.useClickZoom,fadeMagnifier:q.fadeMagnifier,zoomOutIcon:q.staticImages.zoomOutCur,enhancedHoverOverlay:q.enhancedHoverOverlay||q.atfEnhancedHoverOverlay};x&&(x.destroy(),x=t);var e=D.find(".image.item.selected img[data-old-hires]").not("[data-old-hires='']");c.isjQueryObjDefined(e)?q.useClickZoom?(e.one("click.loadmagnifier touchstart.loadmagnifier",function(a){x=new h(e,d);x.engageMagnifier(a,!0)}),v?e.css("cursor",'url("'+q.staticImages.zoomInCur+'"), auto'):
(e.css("cursor","-webkit-zoom-in"),e.css("cursor","-moz-zoom-in"),e.css("cursor","zoom-in"))):x=new h(e,d):b.isEnabled&&f.logHoverZoomApplicability(a,b)}}var p,q,n,Q,x,D,v=navigator.userAgent.match(/msie|trident/i);return function(a,c,d,e){p=this;q=a;n=c;b.refToModel=n;Q=e;p.render=function(a,b,c,d,e,f){D=c;x&&(x.destroy(),x=t)};p.update=function(a){};Q.register("loadMagnifier",k);Q.register("resize",k)}});n.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",
function(g,a,c,d){function b(a,b,e){a=(a=e?e:c.getColorFromState(b.getState().hovered_variations,l))&&""!==a?a:l.defaultColor;k.dispatch("updateView",{type:"swatchHover",data:{color:a}});d.postCountMetric("swatchHover")}function f(a,b,e,f){a=(a=f?f:c.getColorFromState(b.getState().selected_variations,l))&&""!==a?a:l.defaultColor;a===h.getCurrentItem().color?"function"===typeof e&&e():(k.dispatch("updateSelection",{type:"swatchClick",data:{color:a},onload:e}),d.postCountMetric("swatchClick"))}var e,
l,h,k;return function(a,c,d,m){e=this;l=a;h=c;k=m;g.on("image-block-twister-swatch-hover",b);g.on("image-block-twister-swatch-click",f);e.render=function(a,b,c,d,e){};e.update=function(a){}}});n.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric").register("ImageBlockVideoView",function(g,a,c,d,b,f){function e(b,c,e,f){!v.autoplayVideo||P||v.useChromelessVideoPlayer?!d.isjQueryObjDefined(b.find(".a-button-selected"))&&!d.productReelExperimentEnabled(v)&&(e=E.getCurrentItem(),
!f||v.prioritizeVideos||"chromeless-video"===e.type&&v.autoplayVideo)&&(f=d.getVideoHash(e.color,0,v),-1!==f&&(c+=0,A.dispatch("updateModel",{data:{index:0,thumbnailIndex:c,variant:f.variant,type:v.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),c=b.find(".item").get(c),d.selectGivenThumbnail(a(c),b))):(d.selectGivenThumbnail(b.find("img:last"),b),d.fadeToThumbnail(b.find("img").length-1,u,b))}function l(a){var b=E.getCurrentItem().color;if(v.useChildVideos&&!v.colorToVideo[b]){var c=
function(){if(a){v.colorToVideo[b]=a;var c={type:"updatedData",data:E.getCurrentItem()};A.dispatch("updateView",c)}};v.lazyLoadExperienceDisabled?c():n.when(d.rankedImagesReadyEvent(v.colorToAsin[b].asin)).execute(function(){c()})}}function h(a){if(!v.useChildVideos)return d.lazyLoadingRequired(E.getCurrentItem(),E,v)?void 0:v.videos;if(v.colorToVideo[a])return v.colorToVideo[a];var c=v.colorToAsin[a];if(c&&c.asin){var e={};e.params={asin:c.asin,productGroupID:v.productGroupID,useAiryVideoPlayer:!0,
useChromelessVideoPlayer:v.useChromelessVideoPlayer,isUDP:v.isUDP};v.isDPXFeatureEnabled||(e.success=function(a){l(a)},b.load("/gp/product/features/apparel-main-image/videos.html",e));return v.colorToVideo&&v.colorToVideo[a]}}function k(){A.dispatch("selectThumbnail",d.productReelExperimentEnabled(v)?1:0)}function p(b,e,g,h){return c.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:b[0],streamingUrls:e.url,swfUrl:g.swfUrl,foresterMetadataParams:g.foresterMetadataParams,backgroundColor:"transparent",
flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=d.isjQueryObjDefined(b.find("video"))?"HTML5":"FLASH";f.postCountMetric("dppc_chromelessVideo:"+a)},playing:function(){b.parent().css("z-index",8)},videounsupported:function(){k();f.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){k();f.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){H.seek(0)}},cuePoints:[{values:e.durationSeconds-1,type:"position",
callback:function(c,d,e){c=e.durationSeconds-e.playheadTimeSeconds;b.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*c,.1,function(){b.parent().css({"background-color":"transparent","z-index":-1});k();a(this).show().css("opacity",1)})}}]})}function m(b){if("chromeful-video"===b.type||"chromeless-video"===b.type){var c=d.getVideoHash(b.color,b.index,v);if(-1===c)return-1;if("chromeful-video"===b.type){b=u.width()/u.height();var e=parseInt(c.videoWidth,10),f=parseInt(c.videoHeight,
10);d.updateAspectRatio(b,e,f,z);H?(H.show(),d.loadMediaIntoAiry(H,c,I)):H=d.createAiryInstanceForChromeful(z,c,I,null,v.autoplayVideo,u,G,B);b:if(d.productReelExperimentEnabled(v)){if(1<d.getVideosCount(E.getCurrentItem().color,v)){if(d.isDefined(r)){G.show();break b}r=a('<a class="more-videos"></a>').attr("href","#").text(v.staticStrings.watchMoreVideos);G.find("#videoCaption").append(r);g.declarative.create(r,"videoIngressClick",M)}d.playVideoInImmersiveView(v,E.getCurrentItem().color)&&(g.declarative.create(z,
"videoIngressClick",M),z.children().css("z-index","-1"),z.css("display","inline-block"))}else G.find("#videoCaption").text(v.staticStrings.playVideo),G.show();c=H;v.autoplayVideo&&c&&!P&&(d.toggleVideoCaption(G),c.setVolume(0),c.show(),c.play(),P=!0)}else H?(H.show(),d.loadMediaIntoAiry(H,c,I),H.play(),G.show()):(H=p(z,c,I))&&H.play()}}function t(b,c,g){var k=h(c);c=b;d.isDefined(k)&&0<k.length&&v.alwaysIncludeVideo&&b===v.maxAlts&&(B.find(".item:last").remove(),b--);d.isDefined(k)&&(a.each(k,function(a,
c){if(b<v.maxAlts){var e=v.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",g={type:e,index:a,thumbnailIndex:b,variant:c.variant};M={type:"video-ingress",index:a,thumbnailIndex:b,variant:c.variant};d.productReelExperimentEnabled(v)&&("chromeful-video"===e&&(y+=" videoBlockIngress",d.productReelDarkIngressEnabled(v)&&(y+=" videoBlockDarkIngress",c.thumb=c.thumb.replace("_PKmb-play-button-overlay-thumb",""))),v.altsOnLeft||(y+=" a-align-top"));d.createThumbnail(g,c.thumb,B,y);if(d.productReelExperimentEnabled(v)){Q(B.find(".videoBlockIngress img"),
v.videoIngressATFSlateThumbURL);var g=1<k.length?"multiple-videos":"one-video",h=1<k.length?k.length+" "+v.staticStrings.multipleVideos:v.staticStrings.singleVideo;h&&B.find(".videoBlockIngress").append(B.find("#videoCount_template").clone().text(h).attr("id","videoCount")).addClass(g)}F||(F=!0,f.postCountMetric("chromeless-video"===e?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));b++}if(d.productReelExperimentEnabled(v))return!1}),e(B,c,b,g));return b}function Q(a,b){var c=a.attr("src");
if(c&&b){a.attr("src",b);var d=new Image;d.onload=function(b){a.attr("src",c)};d.src=c}}function x(a){H&&H.pause();a.data=M;a.clickTimeStamp=a.$event.timeStamp;var b="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";A.dispatch("imageClick",a);f.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);f.postCountMetric(b)}var D,v,E,A,B,z,G,u,r,H,I,M,w,F=!1,P=!1,y="videoThumbnail";return function(b,c,e,h){D=this;v=b;E=c;A=h;I=v.airyConfig;v.colorToVideo={};v.colorToVideo[v.landingAsinColor]=
v.colorToVideo[v.defaultColor]=v.videos;D.render=function(b,c,e,f,h,k){B=f;z=h.find("#main-video-container");G=z.parent().find("#video-canvas-caption");u=a("#main-image-container");v.useChromelessVideoPlayer||z.addClass("chromeful-container");w=t(c,b,k);m(E.getCurrentItem());d.productReelExperimentEnabled(v)&&g.declarative("videoIngressClick",["click"],x);return w};D.update=function(a){var b=a.data;"ingress"!==b.type&&H&&(H.hide(),z.parent().css("z-index",-1),G.hide());if("swatchHover"===a.type)b.color===
E.getCurrentItem().color?m(E.getCurrentItem()):a.captured||d.lazyLoadingRequired(b,E,v)&&!d.lazyLoadOnHoverEnabled(v)&&m(E.getCurrentItem());else if("chromeful-video"===b.type||"chromeless-video"===b.type)"mouseenter"===a.type&&f.postCountMetric("dpcc_videoThumbHovered_"+(b.thumbnailIndex+1)+"_"+w),m(b),v.usePeekHover&&"click"!==a.type||(d.selectGivenThumbnail(a.$declarativeParent,B),"click"===a.type&&d.productReelDarkIngressEnabled(v)&&(f.postCountMetric("dpcc_videoThumbClicked_"+(b.thumbnailIndex+
1)+"_"+w),M.action="videoIngressClick",M.clickTimeStamp=a.$event.timeStamp,A.dispatch("videoIngressClick",M),f.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp)))};if(v.isDPXFeatureEnabled)g.on("triggerVideoAjax",l)}});n.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(g,a,c,d,b,f,e,l,h,k){function p(a){return a.hiRes||
a.large||a.main[a.main.length-1]}function q(){C.find("#ivTitle").click(function(){ba.hide()})}function n(a){if(b.productReelExperimentEnabled(L)){var c=C.find("#ivMediaSelect");c.find("option[value='"+a+"']").attr("selected",!0);c.trigger("change")}}function Q(){R=Ta?{type:"360-spin"}:pa.getCurrentItem()}function x(){var a=C.find("#ivStage"),b=ba.$container.find(".a-popover-wrapper"),c=b.find(".a-popover-inner"),b=b.height()-k.getDimension(c,"padding-top")-k.getDimension(c,"padding-bottom");C.css("height",
b);var c=C.find("#ivTitle").outerHeight(!0),d=C.find("#ivVariationSelection").outerHeight(!0),e=C.find("#ivMediaSelection").outerHeight(!0),f=C.find("#ivThumbs"),g=k.getDimension(f,"margin-top")+k.getDimension(f,"margin-bottom");f.css("height",b-c-d-e-g);C.find("#ivLargeImage").css("height",b);a.css("width",C.width()-k.getDimension(C,"padding-left")-k.getDimension(C,"padding-right")-C.find("#ivThumbColumn").width()-k.getDimension(a,"margin-left")-k.getDimension(a,"margin-right"))}function D(){C.find("#ivMediaSelect").change(function(){var a=
d(this).val();"all"===a?(C.find("#ivVideoList").hide(),C.find("#ivThumbs").show(),C.find(".ivThumbVideo").show(),"chromeful-video"===R.type&&C.find("#ivVideo_"+R.index).click()):"images"===a?(C.find("#ivVideoList").hide(),C.find("#ivThumbs").show(),C.find(".ivThumbVideo").hide(),"chromeful-video"===R.type&&(0===ia&&0===J?C.find("#iv360").click():0===ia?C.find("#ivHeroImage_0").click():C.find("#ivImage_0").click())):"videos"===a&&(C.find("#ivVideoList").show(),C.find("#ivThumbs").hide(),"chromeful-video"!==
R.type?C.find("#ivVideoList_0").click():C.find("#ivVideoList_"+R.index).click())})}function v(){var a=C.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var e=d.width(),f=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(f=d[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,f=0===f?1:f,g=Math.min(b/e,c/f),h=f*g,k=e*g;1>g?(Qa?a.css("cursor","url('"+L.staticImages.zoomIn+"'), auto"):(a.css("cursor",
"-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),Oa=!0):Oa=!1;e=Math.min(k,e);f=Math.min(h-20,f);d.css({"margin-top":(c-f)/2,"margin-left":(b-e)/2,height:f,width:e});a.css("visibility","visible");Fa=!1}function E(a){var b=C.find("#ivLargeImage");b.css("visibility","hidden");b.empty();k.animateStageIn(b);b.append(a);v()}function A(){ha&&ha.pause();C.find("#ivLarge360").css("display","none");C.find("#ivLargeVideo").css("display","none");C.find("#ivLargeImage").css("display",
"none");I()}function B(a){A();C.find("#ivLargeImage").css("display","block");var c;"hero-image"===a?b.isDefined(ra)&&(c=p(ra[R.index])):b.isDefined(ea)&&(c=p(ea[R.index]));if(b.isDefined(c)){C.find(".fullscreen").remove();var e=d("<img>").attr("src",c).addClass("fullscreen"),f=C.find("#ivLargeImage");k.animateStageOut(f,function(){e.load(function(){E(e)});if(e[0].complete)E(e);else{f.empty();var a=(f.height()-104)/2,b=(f.width()-80)/2;d("<img>").attr("src",L.staticImages.spinner).css({position:"relative",
top:a+"px",left:b+"px"}).appendTo(f)}})}}function z(){var a=parseInt(R.index,10)+1;a>=ja.length||C.find("#ivVideo_"+a).click()}function G(){var a;b.isDefined(ja)&&(a=ja[R.index]);if(b.isDefined(a)){A();var c=C.find("#ivLargeVideo").css("display","block");ha?(ha.isDetached()&&ha.attach(c[0]),b.loadMediaIntoAiry(ha,a,Ca),ha.show()):(ha=b.createAiryInstanceForChromeful(c,a,Ca,"ImmersiveView"),Ca.enableContinuousPlay&&ha.bind("ended",z));ha.play({isAsync:!0})}}function u(){Q();var a;"hero-image"===R.type?
a=C.find("#ivHeroImage_"+R.index):"image"===R.type?(a=C.find("#ivImage_"+R.index),n("all")):"chromeful-video"===R.type||"chromeless-video"===R.type?(a=C.find("#ivVideo_"+R.index),n("videos")):a="360-spin"===R.type?C.find("#iv360"):b.isDefined(ra)?C.find("#ivHeroImage_"+R.index):C.find("#ivImage_"+R.index);b.isjQueryObjDefined(a)||(a=C.find("#ivImage_0"));r(a)}function r(a){C.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(R.type="chromeful-video",R.index=
a.attr("id").split("_")[1],G()):a.hasClass("ivHeroImage")?(R.type="hero-image",R.index=a.attr("id").split("_")[1],B(R.type)):a.hasClass("iv360Image")?(R.type="360-spin",R.index=0,H()):(R.type="image",R.index=a.attr("id").split("_")[1],B(R.type))}function H(){A();C.find("#ivLarge360").css("display","block");y();var a=C.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});k.animateStageIn(a)},200);w();e.postCountMetric("dppc_click360");ua=Date.now()}function I(){0<ua&&(M("dppc_duration360",
Date.now()-ua),ua=0)}function M(a,b){m.ue&&m.ue.count(a,b)}function w(){if(0<wa){var a=C.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function F(a,b){if(wa<a.length){var c=d("<img />").css({display:"block",width:6*qa+"px",height:sa+"px"});c.hide();b.append(c);c.get(0).onload=function(){b.closest(document.documentElement).length&&(wa++,1===wa&&(w(),0<ua&&M("dppc_loadTime360",Date.now()-ua)),0<Da&&M("dppc_perSpriteloadTime360",Date.now()-Da),C.find("#iv360Spinner").hide(),
c.show(),ya=5*Z.imageLocations[Math.floor(Ea/Z.imageLocations[0].length)][Ea%Z.imageLocations[0].length],F(a,b))};c.attr("src",a[wa].replace(/(\._SP)\d+(,)\d+/,"$1"+xa+"$2"+za));Da=Date.now()}}function P(a){if(b.isDefined(Z.spriteWidthSizes)&&0<Z.spriteWidthSizes.length){var c=Z.spriteWidthSizes,d=c.length,e=c[0],f=c[d-1];if(a<=e)return e;if(a>f)return f;for(e=0;e<d;e++)if(a>c[e]&&a<=c[e+1])return c[e+1]}else return a}function y(){var a=C.find("#ivLarge360");a.children("#image-360-sprites").length||
(a.append("<div id='image-360-sprites'></div>"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),d("<img>").attr("src",L.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),Ha=!0,N())}function N(){if(b.isDefined(Z.spriteURLs)&&
b.isDefined(C)&&Ha&&!La){var a=C.find("#ivLarge360"),c=d("<div>").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});b.isDefined(Z.staticImages.hint360)&&d("<img>").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",Z.staticImages.hint360).appendTo(c);d("<div>").css({"text-align":"center"}).text(L.staticStrings.dragToSpin).appendTo(c);c.appendTo(a);var c=Z.imageWidth,e=Z.imageHeight,f=a.parent().width(),g=a.parent().height(),
h=0,k=0;c/e>f/g?(xa=P(f),za=Math.round(e/c*xa),qa=Math.ceil(f),sa=Math.ceil(za/xa*f),k=(g-sa)/2):(za=P(g),xa=Math.round(c/e*za),sa=Math.ceil(g),qa=Math.ceil(xa/za*g),h=(f-qa)/2);a.css({"margin-left":h,"margin-top":k,width:qa+"px",height:sa+"px",overflow:"hidden",position:"relative"});a.children("#image-360-sprites").css("width",6*qa+"px");F(Z.spriteURLs,C.find("#image-360-sprites"),0);c=C.find("#ivLarge360");c.bind("mousedown",V);c.bind("touchstart",K);c.bind("touchmove",T);c.bind("touchend",S);d(document).bind("mousemove",
U);d(document).bind("mouseup",X);b.isDefined(L.staticImages.grab)&&a.css("cursor","url('"+L.staticImages.grab+"'), auto");La=!0}}function K(a){Ja=!0;Ia=a.originalEvent.targetTouches[0].clientX}function T(a){Ja&&(aa(a.originalEvent.targetTouches[0].clientX-Ia),Ia=a.originalEvent.targetTouches[0].clientX)}function S(a){Ja&&(Ja=!1)}function V(a){Ga=!0;Pa=a.originalEvent.clientX;b.isDefined(L.staticImages.grabbing)&&(a=C.find("#ivLarge360"),a.css("cursor","url('"+L.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor",
"url('"+L.staticImages.grabbing+"'), auto"));return!1}function U(a){Ga&&(aa(a.originalEvent.clientX-Pa),Pa=a.originalEvent.clientX)}function X(a){Ga&&(Ga=!1,b.isDefined(L.staticImages.grab)&&(a=C.find("#ivLarge360"),a.css("cursor","url('"+L.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function aa(a){for(a=ya-=a/qa*180;0>a;)a+=360;for(;360<a;)a-=360;ya=a;var c;a=360;for(var d=0;d<wa;d++)for(var e=0;e<Z.imageLocations[d].length;e++){var f=Math.abs(ya-5*Z.imageLocations[d][e]);
f<a&&(a=f,c=d*Z.imageLocations[0].length+e)}c!==Ea&&(a=Math.floor(c/Z.imageLocations[0].length),a!==Math.floor(Ea/Z.imageLocations[0].length)&&(b.isDefined(Na)||(Na=document.createElement("canvas").getContext("2d")),d=C.find("#image-360-sprites").children(),Na.drawImage(d[a],0,0)),a=C.find(".iv360Hint").not(".iv360HintFaded"),b.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));Ea=c;a=c%Z.imageLocations[0].length*-1*qa;c=-1*Math.floor(c/Z.imageLocations[0].length)*sa;d=C.find("#ivLarge360").children("#image-360-sprites");
d.css("-webkit-transform","translate3d("+a+"px, "+c+"px, 0)");d.css("transform","translate3d("+a+"px, "+c+"px, 0)")}function fa(){C.delegate(".ivThumb","click",function(){var a=d(this);r(a)});C.delegate(".ivThumbVideoListOuter","click",function(){C.find(".ivThumbVideoListOuter").removeClass("selected");var a=d(this);a.addClass("selected");R.type="chromeful-video";R.index=a.attr("id").split("_")[1];G()})}function oa(){ha&&!ha.isDetached()&&(Ca.volume=ha.getVolume(),ha.detach(),!document.all||m.atob||
document.addEventListener||(ha=null));C.find("#ivLargeImage").empty();I()}function ga(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function na(a){var b=Ba.top-(a.pageY-Ma[1])*Sa;a=ga(Ba.left-(a.pageX-Ma[0])*Sa,Ka.left);b=ga(b,Ka.top);C.find(".fullscreen").css({left:a,top:b})}function ma(){C.delegate("#ivLargeImage","click",function(a){if(Fa)v();else if(Oa){C.find(".fullscreen").removeAttr("style");if(Oa){var b=C.find("#ivLargeImage"),c=b.find(".fullscreen");Qa?b.css("cursor","url('"+L.staticImages.zoomOut+
"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));Fa=!0;var d=C.find("#ivLargeImage");Ka.left=d.width()-c.width();Ka.top=d.height()-c.height();var d=b.height()/2,e=b.width()/2;Ma=[b.offset().left+e,b.offset().top+d];Ba.top=d-c.height()/2;Ba.left=e-c.width()/2;c.css({position:"relative",left:Ba.left,top:Ba.top});Sa=Math.max(c.height()/b.height(),c.width()/b.width())}na(a)}});C.delegate("#ivLargeImage","mousemove",function(a){Fa&&na(a)})}function da(c){if(b.isImmersiveViewEnabled(L,
pa.getCurrentItem().color)){Ta=b.isDefined(c)&&"button-360-click"===c.action;l.isEnabled&&h.logImmersiveViewRequestServed(l);e.postCountMetric("dppc_immersiveViewOpened");if(b.isDefined(ba))ba.show();else{c=d("#auiImmersiveViewDiv");var f=d(m).height()-150,p=d(m).width()-75;ba=a.create(c,{name:"immersiveView",activate:"onclick",width:p,height:f,popoverLabel:"ImmersiveView",hideHeader:!0});c.click()}if(ta){C=d("#ivMain");c=pa.getCurrentItem().color;ea=L.colorImages[c];ra=L.heroImage[c];ja=L.useChildVideos?
L.colorToVideo[c]:L.videos;Ra=W()&&L.spin360ColorEnabled[c];Z=W()?L.spin360ColorData[c]:t;Q();O=J=va=ia=0;b.isDefined(ra)&&(J=ra.length);b.isDefined(ea)&&(ia=ea.length);b.isDefined(ja)&&(va=ja.length);Ra&&(O=1);k.populateTitle(C.find("#ivTitle"),45,L);k.populateVariationSelection(C.find("#ivVariationSelection"));c=C.find("#ivMediaSelect");0===ia+O||0===va?(c.parent().hide(),C.find("#ivThumbs").addClass("noMediaSelection")):(c.empty(),d("<option/>").attr("value","all").prop("selected",!0).text(L.staticStrings.allMedia+
" ("+(J+ia+O+va)+")").appendTo(c),d("<option/>").attr("value","images").text(L.staticStrings.images+" ("+(J+ia+O)+")").appendTo(c),d("<option/>").attr("value","videos").text(L.staticStrings.videos+" ("+va+")").appendTo(c),c.parent().show(),c.val("all"));c=C.find("#ivThumbs");c.find(".ivRow").not(".placeholder").remove();for(var f=J+ia+va+O,q=p=0;p<f;)for(var n=c.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(c),w=0;3>w&&p<f;w++,p++,q++)if(q<J){var r=ra[p].thumb,u=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id",
"ivHeroImage_"+p).appendTo(n);u.find(".ivThumbImage").css("background",'url("'+k.getResizedThumbnailURL(r)+'") center no-repeat')}else if(q>=J&&q<ia+J)r=ea[p-J].thumb,u=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(p-J)).appendTo(n),u.find(".ivThumbImage").css("background",'url("'+k.getResizedThumbnailURL(r)+'") center no-repeat');else if(q>=J+ia&&q<ia+J+O)u=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id",
"iv360").appendTo(n),u.find(".ivThumbImage").css("background",'url("'+(b.isDefined(L.staticImages.icon360)?k.getResizedThumbnailURL(L.staticImages.icon360,!0):"")+'") center no-repeat');else if(r=ja[p-ia-J-O],u=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id","ivVideo_"+(p-ia-J-O)).appendTo(n),u.find(".ivThumbImage").css("background",'url("'+r.thumbUrl+'") center no-repeat'),b.isDefined(r)){var y={position:"triggerTop"},v=C.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");
v.find(".ivVideoPopoverTitle").text(r.title);v.find(".ivVideoPopoverDuration").text(r.durationTimestamp);y.inlineContent=v[0];g.declarative.create(u,"a-tooltip",y)}c=C.find("#ivVideoList");c.find(".ivThumbVideoListOuter").not(".placeholder").remove();f=c.find(".placeholder");for(p=0;p<va;p++)q=ja[p],n=f.clone().removeClass("placeholder").appendTo(c),n.attr("id","ivVideoList_"+p),n.find(".ivThumbImage").css("background",'url("'+q.thumbUrl+'") center no-repeat'),n.find(".ivThumbTitle").text(q.title),
n.find(".ivThumbDuration").text(q.durationTimestamp);C.find("#ivLarge360").empty();wa=0;La=Ha=!1;Ca=L.airyConfig;ta=!1;Wa()}}}function ka(a){var c=L.colorToAsin[a],d={},g=500;if(c&&c.asin){d.params={asin:c.asin};var h="360"+c.asin,k=Date.now();d.success=function(c){M("dppc_asyncRequestTime360",Date.now()-k);c&&b.isDefined(c.spin360.spin360Model)?(b.ajaxState(h,"success"),L.spin360ColorData[a]=c.spin360.spin360Model,a===pa.getCurrentItem().color&&(Z=L.spin360ColorData[a],N())):d.error()};d.error=function(){e.postCountMetric("dppc_asyncFailed360");
M("dppc_asyncRequestTime360",Date.now()-k);g*=2;16E3>=g?setTimeout(function(){k=Date.now();f.load("/gp/product/features/apparel-main-image/360.html",d)},g):b.ajaxState(h,"fail")};b.ajaxState(h)&&"fail"!==b.ajaxState(h)||(f.load("/gp/product/features/apparel-main-image/360.html",d),b.ajaxState(h,"sent"))}}function W(){return b.isDefined(L.spin360ConfigEnabled)&&L.spin360ConfigEnabled}var ca,L,pa,la,ba,C,ra,ea,ja,J,ia,va,O,R,ha,Ca,Z,Ra,qa,sa,za,xa,Pa,Ia,Ta=!1,Ha=!1,La=!1,ya=0,Ea=0,ua=0,Da=0,Ga=!1,Ja=
!1,wa=0,Na,Qa=navigator.userAgent.match(/msie|trident/i),ta=!0,Fa=!1,Oa=!1,Ka={},Ba={},Sa,Ma,Wa=g.once(function(){D();fa();ma();g.on("a:popover:afterUpdatePosition:immersiveView",x);g.on("a:popover:afterShow:immersiveView",u);g.on("a:popover:afterHide:immersiveView",oa);q()});return function(a,c,f,h){ca=this;L=a;pa=c;l.refToModel=pa;la=h;W()&&(L.spin360ColorData[L.landingAsinColor]=L.spin360ColorData[L.defaultColor],L.spin360ColorEnabled[L.landingAsinColor]=L.spin360ColorEnabled[L.defaultColor]);
b.isDefined(L.staticImages.icon360)&&d("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",k.addStyleCodeToURL(L.staticImages.icon360,"_FMpng_RI_"));ca.render=function(a,c,d,f,h,k){ta=!0;W()&&L.spin360ColorEnabled[a]&&!b.isDefined(L.spin360ColorData[a])&&(L.spin360ColorData[a]={},ka(a));b.isImmersiveViewEnabled(L,pa.getCurrentItem().color)&&W()&&L.spin360ColorEnabled[a]&&(c===L.maxAlts&&(a=f.find(".item.imageThumbnail"),d=f.find(".item.videoThumbnail"),b.isDefined(d)&&
1<d.length?d.last().remove():a.last().remove(),c--),a=f.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),g.declarative.create(a,"button-360-click"),f.append(a),c++,e.postCountMetric("dppc_display360"));return c};ca.update=function(a){};la.register("imageClick",da);la.register("button360Click",da)}});n.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric",
"imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(g,a,c,d,b,f,e,l,h,k){function p(){var a=D.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),b=a.find(".a-popover-inner"),a=a.height()-k.getDimension(b,"padding-top")-k.getDimension(b,"padding-bottom");d("#iv-tab-view-container").css("height",a);A=d("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==d(this).css("display")}).length;1<A?(d("#iv-tab-view-container ul.iv-tab-views li").parent().show(),
b=d("#iv-tab-view-container ul.iv-tab-views li").parent().height(),a-=b):d("#iv-tab-view-container ul.iv-tab-views li").parent().hide();d("#iv-tab-view-container .iv-tab-content").css("height",a);g.trigger("dp:image-block:immersive-view:resize")}function q(){g.trigger("dp:image-block:immersive-view:reset")}function n(c){if(b.isImmersiveViewEnabled(x,D.getCurrentItem().color)){l.isEnabled&&h.logImmersiveViewRequestServed(l);e.postCountMetric("dppc_immersiveViewOpened");b.isDefined(c)&&("button-360-click"===
c.action?d("#iv360TabHeading").click():"videoIngressClick"===c.action?(B=c.clickTimeStamp,d("#ivVideosTabHeading").click()):d("#ivImagesTabHeading").click());var f=D.getImmersiveViewModalInstance();if(b.isDefined(f))f.show();else{c=d("#auiImmersiveViewDiv");var f=Math.min(Math.max(d(m).height()-150,540),1080),k=Math.min(Math.max(d(m).width()-75,990),1980),f=a.create(c,{name:"immersiveView",activate:"onclick",width:k,height:f,popoverLabel:"ImmersiveView",hideHeader:!0});D.setImmersiveViewModalInstance(f);
c.click()}E&&(E=!1,z(),g.trigger("dp:image-block:immersive-view:init"))}}var t,x,D,v,E=!0,A=0,B,z=g.once(function(){g.on("a:popover:afterUpdatePosition:immersiveView",p);g.on("a:popover:afterShow:immersiveView",p);g.on("a:popover:afterHide:immersiveView",q)}),G=g.once(function(){var a=d("#iv-tab-view-container ul.iv-tab-views li");a.bind("click",function(b){var c=a.filter(".iv-active");c.attr("id")!==d(this).attr("id")&&g.trigger("dp:ivTabs:"+c.find("a").attr("data-iv-tab-view")+":deselect",b);a.removeClass("iv-active");
d(this).addClass("iv-active");d("#iv-tab-view-container .iv-tab-content").hide();c=d(this).find("a").attr("data-iv-tab-view");d("#"+c).show();"ivVideosTab"===c&&(b.clickTimeStamp=B||b.timeStamp);g.trigger("dp:ivTabs:"+c+":select",b);e.postCountMetric("dppc_"+c);return!1})});return function(a,c,d,f){t=this;x=a;D=c;l.refToModel=D;v=f;t.render=function(a,b,c,d,f,g){e.postCountMetric("dpcc_altThumbs_"+b);E=!0};t.update=function(a){};t.getTitle=function(){};t.getVariationSelectionInfo=function(){};G();
v.register("imageClick",n);v.register("button360Click",n);b.productReelDarkIngressEnabled(x)&&v.register("videoIngressClick",n)}});n.when("A","jQuery","imageBlockUtils").register("ImageBlockLoader",function(g,a,c){return{load:function(a,b){b=b||{};b.timeout=b.timeout||4E3;g.ajax(a,b)}}});n.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric").register("imageBlockUtils",function(g,a,c,d,b,f,e,l){function h(a){return null!==
a&&"undefined"!==typeof a}function k(b){var c=0;a.each(b,function(a,b){var d=parseInt(b[1],10);d>c&&(c=d)});return c}function p(b){var c=0;a.each(b,function(a,b){var d=parseInt(b[0],10);d>c&&(c=d)});return c}function q(a,b,c){b=b.width();if(c.naturalMainImageSize)return b;a=k(a);0<a&&(b=Math.min(b,a));return b}function n(a,b,c){b=b.height();if(c.naturalMainImageSize)return b;a=p(a);0<a&&(b=Math.min(b,a));return b}function t(b){var c;a.each(b,function(a,b){h(c)||(c=b[1]/b[0])});return c||1}function x(a,
b,c){b.fadeTo(500,0,function(){v(a,c);b.fadeTo(500,1)})}function D(a){a&&a.toggle()}function v(b,c){var d=c.find("img");h(d[b])&&a(d[b]).click()}function E(a,b){M[a]=b?b:M[a];return M[a]}function A(b,c,d){d=d||I;d=d.colorImages;if(1>d.length||!h(d[b])||!h(c))return-1;var e=-1;a.each(d[b],function(a,b){b.variant===c&&(e=a)});return e}function B(b,c,d){d=d||I;d=d.colorImages;return!(h(d)&&h(d[b])&&h(d[b][c])&&h(d[b][c].main))||1>a.map(d[b][c].main,function(a,b){return b}).length?-1:d[b][c]}function z(a,
b,c,d){d.parent().css("z-index",2);0!==c&&0!==b&&(b/=c,a>b?d.css("width",b/a*100+"%"):d.css("height",a/b*100+"%"))}function G(a){return a.tabbedImmersiveViewTreatment&&"C"!==a.tabbedImmersiveViewTreatment}function u(b,c){var d;if(d=b.useIV)d=b.colorImages&&b.colorImages[c]&&0<b.colorImages[c].length?!0:!1;e.isEnabled&&(e.IVApplicaple=d,l.logImmersiveViewApplicability(a,e));return d}var r,H,I=a.extend(!0,{},b,f),M={};return{isDefined:h,isUndefinedOrEmpty:function(a){return h(a)?"object"===typeof a&&
0===Object.keys(a).length:!0},isDefinedAndNotEmpty:function(a){return h(a)?"object"===typeof a&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:t,getMaxHeightOfMainImage:n,getMaxWidthOfMainImage:q,getMaxDimensionsOfMainImage:function(a,b,c){var d=n(a,b,c);b=q(a,b,c);a=t(a);c=b/a;b=Math.min(b,d*a);d=Math.min(d,c);return[d,b]},getContainerHeight:function(a,b,c){var d=a.get(0);a=0;if(h(d)){a=d.offsetWidth/b;a=Math.min(a,c);var e;b=I.mainImageHeightPartitions;
c=I.mainImageMaxSizes;if(h(c)&&h(b)){for(var f=0,g=m.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=0;d<b.length;d++)g>b[d]&&(f=d+1);c.length>=f&&(e=c[f])}h(e)&&(a=Math.min(e[1],a))}return a},getColorFromState:function(b,c){if(b){c=c||I;var d="";a.each(c.visualDimensions,function(a,c){b[c]&&(d+=" "+b[c])});return d&&d.substring(1)}},createThumbnail:function(a,b,c,d){var e=c.find(".template").clone().removeClass("template").addClass("item"),f=document.createElement("img");
f.src=b;e.find(".placeHolder").replaceWith(f);(b=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===b&&e.addClass("heroImageThumbnail");h(d)&&e.addClass(d);g.declarative.create(e,"thumb-action",a);c.append(e)},selectGivenThumbnail:function(a,b){var c=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(b,e,f,g,h,k,l,p){var m=a.extend({},f.foresterMetadataParams);
null!==g&&(m.method+="."+g);var n=[];e.disabledViewIds&&(n=e.disabledViewIds);return c.embed({parentElement:b[0],streamingUrls:e.url,contentId:e.mediaObjectId,contentMinAge:Number(e.minimumAge||"")||0,contentTitle:e.title,swfUrl:f.swfUrl,foresterMetadataParams:m,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:e.slateUrl,postMediaSlate:e.slateUrl},videoAds:f.videoAds,bindings:{play:function(){"ImmersiveView"===g?r||(r=!0,d.postCountMetric("dppc_chromefulVideoPlayedIV")):
H||(H=!0,d.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:e.durationSeconds-1,type:"position",callback:function(a,b,c){h&&(x(0,k,p),D(l))}}],disabledViewIds:n})},loadMediaIntoAiry:function(a,b,c){a&&a.getMediaSourceInfo()!==b.url&&a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}})},showUnavailable:function(b){b&&(a("#imageBlock .unvailableVariation").html(b),
a("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){a("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:x,toggleVideoCaption:D,selectThumbnail:v,spinner:function(b,c){var d=a("#imageBlock .a-spinner").parent();0===d.length&&(d=a("<div></div>").append(a("<span></span>").addClass("a-spinner").addClass("a-spinner-medium")),b.append(d),d.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)",
"z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));c?d.show():d.hide();return d},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+a},ajaxState:E,getIndexForVariant:A,getImageHash:B,lazyLoadingRequired:function(a,b,c){b=Math.max(A(a.color,b.getCurrentItem().variant,c),0);b=-1!==B(a.color,b,c);a=c.colorToAsin[a.color]&&c.colorToAsin[a.color].asin;a=!a||"success"!==E(a);return!c.lazyLoadExperienceDisabled&&
!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:z,repositionVideoBanner:function(a,b,c,d){setTimeout(function(){var c=a.width()/a.height();z(c,16,9,b)},d||0)},productReelExperimentEnabled:G,productReelDarkIngressEnabled:function(a){return G(a)&&"T2"===a.tabbedImmersiveViewTreatment},getVideosCount:function(a,b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?b.videos.length:0},getVideoHash:function(a,b,c){if(c.useChildVideos){if(!h(c.colorToVideo))return-1;
a=c.colorToVideo[a]}else a=c.videos;return h(a)&&h(a[b])&&h(a[b].url)?a[b]:-1},isImmersiveViewEnabled:u,playVideoInImmersiveView:function(a,b){return u(a,b)&&G(a)}}});n.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils","postMetric").register("ImageBlockHeroImageView",function(g,a,c,d,b){function f(b,e,f,g){if(!c.isjQueryObjDefined(b.find(".a-button-selected"))){var h=D.getCurrentItem();if(!g||"chromeless-video"!==h.type||!x.autoplayVideo){g=0;if("hero-image"===h.type){g=l(h.color,
h.variant);if(-1===g)return;g=-1!==g?g:0}var k=e+g;k>=f&&(g=0,k=e);e=d.getHeroImageHash(x,h.color,g);-1!==e&&(v.dispatch("updateModel",{data:{index:g,thumbnailIndex:k,variant:e.variant,type:"hero-image"}}),e=b.find(".item").get(k),c.selectGivenThumbnail(a(e),b))}}}function e(b,d,e){if("hero-video"===D.getCurrentItem().type)return b;d=x.heroImage&&x.heroImage[d];var g=b;c.isDefined(d)&&(a.each(d,function(a,d){b<x.maxAlts&&(c.createThumbnail({type:"hero-image",index:a,thumbnailIndex:b,variant:d.variant},
d.thumb,E,"imageThumbnail"),b++)}),f(E,g,b,e));return b}function l(b,d){var e=x.heroImage;if(1>e.length||!c.isDefined(e[b])||!c.isDefined(d))return-1;var f=-1;a.each(e[b],function(a,b){b.variant===d&&(f=a)});return f}function h(){if(A.length&&x.repositionHeroImage){var a=d.getHeroDimParams(x,D.getCurrentItem()),b;c.isDefined(a)&&(b=c.isDefined(a.xPos)?a.xPos+"px "+a.yPos+"px ":"center "+a.yPos+"px ",A.css({"background-position":b,"background-size":a.width+"px "+a.height+"px ","max-width":a.width+
"px ","min-height":a.height+"px ",filter:"","-ms-filter":""}))}}function k(a,b,e,f){if(A.length&&a&&b){if("function"===typeof e||f){var g=new Image;g.onload=f?function(){A.css("background-image",'url("'+a+'")')}:e;g.src=a}e=b[1];var g=b[0],h;f||A.css({"background-image":'url("'+a+'")'});x.repositionHeroImage&&(b=d.getHeroDimParams(x,D.getCurrentItem(),b),c.isDefined(b)&&(e=b.width,g=b.height,h=c.isDefined(b.xPos)?b.xPos+"px "+b.yPos+"px ":"center "+b.yPos+"px "));A.css({"background-position":h,"background-size":e+
"px "+g+"px ","max-width":e+"px ","min-height":g+"px ",filter:"","-ms-filter":""})}}function p(b,c,e,f){b=d.getHeroImageHash(x,b,c);if(-1===b)return-1;c=a.map(b.main,function(a,b){return b})[0];k(c,b.main[c],e,f)}function m(a,b,c){if("hero-image"!==a.type)return-1;var e=l(a.color,D.getCurrentItem().variant),e=-1!==e?e:0;if(-1===d.getHeroImageHash(x,a.color,e))return-1;var f=D.getCurrentItem();a.thumbnailIndex=f.thumbnailIndex;a.type=f.type;a.variant=f.variant;a.index=e;n(a,b,c)}function n(a,b,c){var e=
d.getHeroImageHash(x,a.color,a.index),f;f=a&&B&&g.equals(a,B)?!0:!1;B||(B=a);if(!f&&a||b)p(a.color,a.index,b,c),B=a;A.removeClass("hide-background");g.trigger("dp:image-block:update",e)}var t,x,D,v,E,A,B={};return function(b,d,f,g){t=this;x=b;D=d;v=g;x.heroImage[x.landingAsinColor]=x.heroImage[x.defaultColor];t.render=function(b,c,d,f,g,h,k){E=f;A=a("#heroImage");b=e(c,b,h);m(D.getCurrentItem(),k,h);return b};t.update=function(a){var b=a.data;"ingress"!==b.type&&A.addClass("hide-background");"swatchHover"===
a.type?a.captured||(b.type=D.getCurrentItem().type,-1!==m(b)&&(a.captured=!0)):"hero-image"===b.type&&(n(b),"click"!==a.type&&x.usePeekHover||c.selectGivenThumbnail(a.$declarativeParent,E))};v.register("resize",h)}});n.when("A","jQuery","imageBlockUtils","postMetric","ImageBlockAltImageView").register("ImageBlockAltImageIngressView",function(g,a,c,d,b){var f,e,l,h;return function(a,b,d,m){f=this;e=a;l=m;f.render=function(a,b,d,k,l,p,m){h=k;f=this;d=e.maxAlts;k=b;l=e.colorImages[a]?e.colorImages[a].length:
0;l+=c.getVideosCount(a,e);a=e.heroImage[a];p=0;a&&(p=a.length);a=l+p;a>d&&(d=a-d,a=h.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),d+="+",k={type:"ingress",index:0,thumbnailIndex:b,variant:""},a.find("#altIngressText").append(d),g.declarative.create(a,"thumb-action",k),h.append(a),k=b++);return k};f.update=function(a){"ingress"===a.data.type&&"click"===a.type&&l.dispatch("imageClick",a)}}});n.when("A","jQuery","imageBlockUtils").register("ImageBlockState",
function(g,a,c){return function(a,b,f){this.getImageHash=function(b){var g=f.getCurrentItem();b=c.getIndexForVariant(g.color,b||"MAIN",a);return c.getImageHash(g.color,b,a)};this.onImageUpdateForTwister=function(a){b.register("updateSelection",function(b){"swatchClick"===b.type&&"function"===typeof a&&a()})}}});n.when("A","jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(g,a,c){function d(a,b){var c;if(b.repositionHeroImage){c=a[1];var d=a[0];if(768>=(m.innerHeight||
document.documentElement.clientHeight||document.body.clientHeight))c*=.7,d*=.7;else{var f=((m.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,f=Math.max(Math.min(f,1),0);c*=.7+.3*f;d*=.7+.3*f}c=[c,d]}return c}function b(a,b,d){var f;if(d.repositionHeroImage){var g=m.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;d=d.heroFocalPoint;if(c.isDefined(d)){f=Math.max((g-Math.min(1500,a))/2,0);var n=Math.max((g-a)/2,0);f-=n;g=Math.max(Math.min(g,
1500),1024);f=f+(g-420-23)/2-a/b[1]*d}}return f}function f(b,d,f){b=b.heroImage;return!(c.isDefined(b)&&c.isDefined(b[d])&&c.isDefined(b[d][f])&&c.isDefined(b[d][f].main))||1>a.map(b[d][f].main,function(a,b){return b}).length?-1:b[d][f]}return{getHeroImageHash:f,getHeroDimParams:function(e,g,h){if(e.repositionHeroImage){if(!c.isDefined(h)){h=f(e,g.color,g.index);if(-1===h)return;g=a.map(h.main,function(a,b){return b})[0];h=h.main[g]}g=d(h,e);e=b(g[0],h,e);return{height:g[1],width:g[0],xPos:e,yPos:75}}}}});
n.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(g,a,c,d,b,f,e){function l(a,b){var c=g.copy(a);if(e.isDefined(a)&&a.length>b){try{for(var d=-1,f=0;f<a.length;f++){var h=a.charAt(f);if(" "===h||"."===h||"?"===h||";"===h||","===h||":"===h)d=f;if(f===b-4){c=a.substring(0,-1===d?f:d);break}}}catch(l){c=a.substring(0,b-3)}c+="..."}return c}function h(a,b){var c=a.lastIndexOf(".");return a="_"===a.charAt(c-
1)?a.substring(0,c-1)+b+a.substring(c):a.substring(0,c)+"."+b+a.substring(c)}return{getDimension:function(a,b){var c=parseInt(a.css(b),10);return isNaN(c)?0:c},attachTabSelectHandler:function(a,b){g.on("dp:ivTabs:"+a+":select",b)},attachTabDeselectHandler:function(a,b){g.on("dp:ivTabs:"+a+":deselect",b)},attachImmersiveViewResizeHandler:function(a){g.on("dp:image-block:immersive-view:resize",a)},detachImmersiveViewResizeHandler:function(a){g.off("dp:image-block:immersive-view:resize",a)},attachImmersiveViewResetHandler:function(a){g.on("a:popover:afterHide:immersiveView",
a)},hideTabHeading:function(b){a("#"+b).hide()},unhideTabHeading:function(b){a("#"+b).show()},addStyleCodeToURL:h,getResizedThumbnailURL:function(a,b){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var c="_AA50_";b&&(c+="FMpng_RI_");return h(a,c)},populateVariationSelection:function(b){if(e.isDefined(m.DetailPage)&&e.isDefined(m.DetailPage.StateController)){b.empty();
var c=m.DetailPage.StateController.getState(),d=c.variation_label_order,f;for(f in d)if(d.hasOwnProperty(f)){var g=d[f],h=c.selected_variations[g],g=c.variation_display_labels[g];h&&a("<div/>").addClass("ivVariations").text(g+":"+h).appendTo(b)}}},populateTitle:function(a,b,c){a.attr("title",c.title);a.text(l(c.title,b))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,b){a.animate({opacity:.4},100,b)},logError:function(a,b,c,d){m.ueLogError&&m.ueLogError(d,{logLevel:a,
attribution:b,message:c})}}});n.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(g,a,c,d,b,f,e,l){function h(){var a=u.getCurrentItem().color;I=G.colorImages[a];H=G.heroImage[a];M=w=0;b.isDefined(H)&&(M=H.length);b.isDefined(I)&&(w=I.length)}function k(a){return a.hiRes||a.large||a.main[a.main.length-1]}function p(){var a=r.find("#ivStage").find("#ivLargeImage"),
b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var e=d.width(),f=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(f=d[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,f=0===f?1:f,g=Math.min(b/e,c/f),h=f*g,k=e*g;1>g?(P?a.css("cursor","url('"+G.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),K=!0):K=!1;e=Math.min(k,e);f=Math.min(h-20,f);d.css({"margin-top":(c-
f)/2,"margin-left":(b-e)/2,height:f,width:e});a.css("visibility","visible");N=!1}function m(a){var b=r.find("#ivLargeImage");b.css("visibility","hidden");b.empty();l.animateStageIn(b);b.append(a);p()}function n(a){r.find("#ivLargeImage").css("display","none");r.find("#ivLargeImage").css("display","block");var c;"hero-image"===a?b.isDefined(H)&&(c=k(H[F.index])):b.isDefined(I)&&(c=k(I[F.index]));if(b.isDefined(c)){r.find(".fullscreen").remove();var e=d("<img>").attr("src",c).addClass("fullscreen"),
f=r.find("#ivLargeImage");l.animateStageOut(f,function(){e.load(function(){m(e)});if(e[0].complete)m(e);else{f.empty();var a=(f.height()-104)/2,b=(f.width()-80)/2;d("<img>").attr("src",G.staticImages.spinner).css({position:"relative",top:a+"px",left:b+"px"}).appendTo(f)}})}}function t(a){r.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?F.type="hero-image":F.type="image";F.index=a.attr("id").split("_")[1];n(F.type);e.postCountMetric("dpcc_iv_thumbCLick_"+
(parseInt(F.index,10)+1)+"_"+(M+w))}function x(){r.delegate(".ivThumb","click",function(){var a=d(this);t(a)})}function D(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function v(a){var b=S.top-(a.pageY-U[1])*V;a=D(S.left-(a.pageX-U[0])*V,T.left);b=D(b,T.top);r.find(".fullscreen").css({left:a,top:b})}function E(){r.delegate("#ivLargeImage","click",function(a){if(N)p();else if(K){r.find(".fullscreen").removeAttr("style");if(K){var b=r.find("#ivLargeImage"),c=b.find(".fullscreen");P?b.css("cursor",
"url('"+G.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));N=!0;var d=r.find("#ivLargeImage");T.left=d.width()-c.width();T.top=d.height()-c.height();var d=b.height()/2,f=b.width()/2;U=[b.offset().left+f,b.offset().top+d];S.top=d-c.height()/2;S.left=f-c.width()/2;c.css({position:"relative",left:S.left,top:S.top});V=Math.max(c.height()/b.height(),c.width()/b.width())}v(a);e.postCountMetric("dpcc_iv_largeImageCLick")}});
r.delegate("#ivLargeImage","mousemove",function(a){N&&v(a)})}function A(){r.find("#ivLargeImage").empty()}function B(a){if(y){r=d("#ivMain");h();F=u.getCurrentItem();l.populateTitle(r.find("#ivTitle"),160,G);l.populateVariationSelection(r.find("#ivVariationSelection"));a=r.find("#ivThumbs");a.find(".ivRow").not(".placeholder").remove();for(var c=M+w,e=0,f=0;e<c;)for(var g=a.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(a),k=0;4>k&&e<c;k++,e++,f++)if(f<M){var p=H[e].thumb,
m=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+e).appendTo(g);m.find(".ivThumbImage").css("background",'url("'+l.getResizedThumbnailURL(p)+'") center no-repeat')}else f>=M&&f<w+M&&(p=I[e-M].thumb,m=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(e-M)).appendTo(g),m.find(".ivThumbImage").css("background",'url("'+l.getResizedThumbnailURL(p)+'") center no-repeat'));X();y=!1}a=d("#ivImagesTab").height();
r.css("height",a);c=r.find("#ivTitle").outerHeight(!0);e=r.find("#ivVariationSelection").outerHeight(!0);f=r.find("#ivThumbs");g=l.getDimension(f,"margin-top")+l.getDimension(f,"margin-bottom");f.css("height",a-c-e-g);r.find("#ivLargeImage").css("height",a);a=r.find("#ivStage");c=r[0]&&r[0].getBoundingClientRect&&Math.floor(r[0].getBoundingClientRect().width)||r.width();a.css("width",c-l.getDimension(r,"padding-left")-l.getDimension(r,"padding-right")-r.find("#ivThumbColumn").width()-l.getDimension(a,
"margin-left")-l.getDimension(a,"margin-right"));F=u.getCurrentItem();a="hero-image"===F.type?r.find("#ivHeroImage_"+F.index):"image"===F.type?r.find("#ivImage_"+F.index):b.isDefined(H)?r.find("#ivHeroImage_"+F.index):r.find("#ivImage_"+F.index);b.isjQueryObjDefined(a)||(a=r.find("#ivImage_0"));t(a)}var z,G,u,r,H,I,M,w,F,P=navigator.userAgent.match(/msie|trident/i),y=!0,N=!1,K=!1,T={},S={},V,U,y=!0,X=g.once(function(){x();E();l.attachImmersiveViewResizeHandler(B);l.attachTabDeselectHandler("ivImagesTab",
A)});return function(a,b,c,e){z=this;G=a;u=b;z.render=function(a,b,c,e,f,g){y=!0;h();0===M+w?l.hideTabHeading("ivImagesTabHeading"):l.unhideTabHeading("ivImagesTabHeading");1===M+w?d("#ivThumbs").hide():d("#ivThumbs").show()};z.update=function(a){};l.attachTabSelectHandler("ivImagesTab",B)}});n.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",
function(g,a,c,d,b,f,e,l,h,k){function p(){u.delegate(".ivThumb","click",function(){var a=d(this);u.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")&&(r.type="chromeful-video",r.index=a.attr("id").split("_")[1])})}function n(){var a=d("#ivVideosTab").height();u.css("height",a);var b=u.find(".vse-video-block");I=a-l.getDimension(u,"padding-top")-l.getDimension(u,"padding-bottom");b.css({"max-height":a,overflow:"hidden"});if(N)u.css({"max-width":Math.floor(1.77*
I)});else{var a=u.find(".vse-airy-container"),b=u.find(".vse-ib-metadata"),c=Math.floor(I-l.getDimension(b,"height")),e=Math.floor(1.77*c);a.css({"max-height":c,"max-width":e});b.css("max-width",e);K&&(a=u.find(".vse-vertical-scroll"),b=l.getDimension(a,"margin-top")+l.getDimension(a,"margin-bottom"),a.css("max-height",I-b))}}function t(){H&&H.pause();H&&H.pause();T=!1;P=!0;F=null}function Q(){H&&H.pause()}function x(a){F=a.clickTimeStamp;y&&(k.get(g,"#ivVideoBlock",G,X,aa),u=d("#ivVideoBlock"),z.getCurrentItem(),
r=z.getCurrentItem(),S());n();T=!0;y=!1;E()}function D(a){y&&(u=d("#ivVideoBlock"),z.getCurrentItem(),r=z.getCurrentItem(),S());T&&E();n()}function v(a){H=a.airy;T&&H.play({isAsync:!0})}function E(){if(H&&(H.play({isAsync:!0,eventTimestamp:F||(new Date).getTime()}),e.postCountMetric("dpcc_vse_videoBlock_video_played"),P)){var a=m.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,e.postTimeMetric("dpcc_vse_vitff",a),P=!1)}}var A,B,z,G,u,r,H,I,M,w,F,P=!0,y=!0,N=!1,K=!1,T=!1,S=
g.once(function(){p();l.attachImmersiveViewResizeHandler(D);l.attachTabDeselectHandler("ivVideosTab",Q);l.attachImmersiveViewResetHandler(t)}),V=function(a,c,f){d("#ivVideoBlockSpinner").addClass("aok-hidden");e.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+c.placement);a=z.getCurrentItem().color;a=b.getVideoHash(a,0,B);H||(H=b.createAiryInstanceForChromeful(d("#ivVideoBlock"),a,B.airyConfig,"ImmersiveView"));N=!0;d("#ivVideoBlock").css({"max-width":1.77*I,margin:"0 auto"});T&&N&&H.play({isAsync:!0})},
U=function(a,b,c){y||k.get(a,"#ivVideoBlock",G,X,aa);d("#ivVideoBlockSpinner").addClass("aok-hidden")},X=function(a,b,c){K=!0;n();T&&E()},aa=function(a,b,c){e.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(a,c,d,e){A=this;B=a;z=c;A.render=function(a,c,d,e,f,k){a=z.getCurrentItem().color;c=b.getVideoHash(a,0,B);M=B.colorToAsin[a]&&B.colorToAsin[a].asin;M=b.isDefined(M)?M:B.mediaAsin;w=null!==B.vseVideoDataSourceTreatment&&"T1"===
B.vseVideoDataSourceTreatment?"ASIN":"physicalID";y=!0;-1===c?l.hideTabHeading("ivVideosTabHeading"):(l.unhideTabHeading("ivVideosTabHeading"),G={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:c.marketPlaceID,locale:c.languageCode,product:{contentID:M,contentIDType:"ASIN"},video:{contentID:c.mediaObjectId,contentIDType:w,videoURL:c.url,imageURL:c.slateUrl},requestId:B.dpRequestId,metadata:{ProductTitle:B.title}},h.get(g,"#ivVideoBlock",G,U,V))};A.update=function(a){};l.attachTabSelectHandler("ivVideosTab",
x);g.on("vseAiry",v)}});n.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","nexusLogger360","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView360",function(g,a,c,d,b,f,e,l,h){function k(){var a=d("#iv360Tab").height();K.css("height",a);var b=K.find("#ivTitle360").outerHeight(!0),c=K.find("#ivVariationSelection360").outerHeight(!0),e=K.find("#ivThumbs360"),f=h.getDimension(e,"margin-top")+h.getDimension(e,"margin-bottom");e.css("height",
a-b-c-f);a=K.find("#ivStage360");b=K[0]&&K[0].getBoundingClientRect&&Math.floor(K[0].getBoundingClientRect().width)||K.width();a.css("width",b-h.getDimension(K,"padding-left")-h.getDimension(K,"padding-right")-K.find("#ivThumbColumn360").width()-h.getDimension(a,"margin-left")-h.getDimension(a,"margin-right"))}function p(){x();var a=K.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});h.animateStageIn(a)},200);m()}function m(){if(0<L){var a=K.find(".iv360Hint");a.removeClass("iv360HintFaded");
a.animate({opacity:1},200)}}function n(a,b){if(L<a.length){var c=d("<img />").css({display:"block",width:6*S+"px",height:V+"px"});c.hide();b.append(c);c.get(0).onload=function(){b.closest(document.documentElement).length&&(L++,1===L&&(m(),0<da&&(e.time("dppc_loadTime360",Date.now()-da,y.mediaAsin),l.postTimeMetric("dppc_loadTime360",Date.now()-da))),0<ka&&(e.time("dppc_perSpriteloadTime360",Date.now()-ka,y.mediaAsin),l.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-ka)),K.find("#iv360Spinner").hide(),
c.show(),na=5*T.imageLocations[Math.floor(ma/T.imageLocations[0].length)][ma%T.imageLocations[0].length],n(a,b))};c.attr("src",a[L].replace(/(\._SP)\d+(,)\d+/,"$1"+X+"$2"+U));ka=Date.now()}}function Q(a){if(b.isDefined(T.spriteWidthSizes)&&0<T.spriteWidthSizes.length){var c=T.spriteWidthSizes,d=c.length,e=c[0],f=c[d-1];if(a<=e)return e;if(a>f)return f;for(e=0;e<d;e++)if(a>c[e]&&a<=c[e+1])return c[e+1]}else return a}function x(){var a=K.find("#ivLarge360");a.children("#image-360-sprites").length||
(a.append("<div id='image-360-sprites'></div>"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),d("<img>").attr("src",y.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),oa=!0,D())}function D(){if(b.isDefined(T.spriteURLs)&&
b.isDefined(K)&&oa&&!ga){var a=K.find("#ivLarge360"),c=d("<div>").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});b.isDefined(T.staticImages.hint360)&&d("<img>").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",T.staticImages.hint360).appendTo(c);d("<div>").css({"text-align":"center"}).text(y.staticStrings.dragToSpin).appendTo(c);c.appendTo(a);var c=T.imageWidth,e=T.imageHeight,f=a.parent().width(),g=a.parent().height(),
h=0,k=0;c/e>f/g?(X=Q(f),U=Math.round(e/c*X),S=Math.ceil(f),V=Math.ceil(U/X*f),k=(g-V)/2):(U=Q(g),X=Math.round(c/e*U),V=Math.ceil(g),S=Math.ceil(X/U*g),h=(f-S)/2);a.css({"margin-left":h,"margin-top":k,width:S+"px",height:V+"px",overflow:"hidden",position:"relative"});a.children("#image-360-sprites").css("width",6*S+"px");n(T.spriteURLs,K.find("#image-360-sprites"),0);c=K.find("#ivLarge360");c.bind("mousedown",B);c.bind("touchstart",v);c.bind("touchmove",E);c.bind("touchend",A);d(document).bind("mousemove",
z);d(document).bind("mouseup",G);b.isDefined(y.staticImages.grab)&&a.css("cursor","url('"+y.staticImages.grab+"'), auto");ga=!0}}function v(a){ca=!0;fa=a.originalEvent.targetTouches[0].clientX}function E(a){ca&&(u(a.originalEvent.targetTouches[0].clientX-fa),fa=a.originalEvent.targetTouches[0].clientX)}function A(a){ca&&(ca=!1)}function B(a){W=!0;aa=a.originalEvent.clientX;b.isDefined(y.staticImages.grabbing)&&(a=K.find("#ivLarge360"),a.css("cursor","url('"+y.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor",
"url('"+y.staticImages.grabbing+"'), auto"));return!1}function z(a){W&&(u(a.originalEvent.clientX-aa),aa=a.originalEvent.clientX)}function G(a){W&&(W=!1,b.isDefined(y.staticImages.grab)&&(a=K.find("#ivLarge360"),a.css("cursor","url('"+y.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function u(a){na-=a/S*180;la&&(e.count("dppc_360dragToSpin",y.mediaAsin),l.postCountMetric("dppc_360dragToSpin"));la=!1;for(a=na;0>a;)a+=360;for(;360<a;)a-=360;na=a;var c;a=360;
for(var d=0;d<L;d++)for(var f=0;f<T.imageLocations[d].length;f++){var g=Math.abs(na-5*T.imageLocations[d][f]);g<a&&(a=g,c=d*T.imageLocations[0].length+f)}c!==ma&&(a=Math.floor(c/T.imageLocations[0].length),a!==Math.floor(ma/T.imageLocations[0].length)&&(b.isDefined(pa)||(pa=document.createElement("canvas").getContext("2d")),d=K.find("#image-360-sprites").children(),pa.drawImage(d[a],0,0)),a=K.find(".iv360Hint").not(".iv360HintFaded"),b.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},
750)));ma=c;a=c%T.imageLocations[0].length*-1*S;c=-1*Math.floor(c/T.imageLocations[0].length)*V;d=K.find("#ivLarge360").children("#image-360-sprites");d.css("-webkit-transform","translate3d("+a+"px, "+c+"px, 0)");d.css("transform","translate3d("+a+"px, "+c+"px, 0)")}function r(){if(C){K=d("#ivMain360");var a=N.getCurrentItem().color;I()&&M(a);T=I()?y.spin360ColorData[a]:t;h.populateTitle(K.find("#ivTitle360"),160,y);h.populateVariationSelection(K.find("#ivVariationSelection360"));K.find("#ivLarge360").empty();
L=0;ga=oa=!1;ma=na=0;ra();C=!1}0!==d("#iv360Tab").height()&&(h.detachImmersiveViewResizeHandler(r),k(),p(),da=Date.now(),ba=la=!0,e.count("dppc_click360",y.mediaAsin),l.postCountMetric("dppc_click360"))}function H(a){var c=y.colorToAsin[a],d={},g=500;if(!c||!c.asin)if(a===y.defaultColor)c={asin:y.winningAsin};else return;d.params={asin:c.asin};var h="360"+c.asin,k=Date.now();d.success=function(c){e.time("dppc_asyncRequestTime360",Date.now()-k,y.mediaAsin);l.postTimeMetric("dppc_asyncRequestTime360",
Date.now()-k);c&&b.isDefined(c.spin360.spin360Model)?(b.ajaxState(h,"success"),y.spin360ColorData[a]=c.spin360.spin360Model,a===N.getCurrentItem().color&&(T=y.spin360ColorData[a],D())):d.error()};d.error=function(){e.count("dppc_asyncFailed360",y.mediaAsin);l.postCountMetric("dppc_asyncFailed360");e.time("dppc_asyncRequestTime360",Date.now()-k,y.mediaAsin);l.postTimeMetric("dppc_asyncRequestTime360",Date.now()-k);g*=2;16E3>=g?setTimeout(function(){k=Date.now();f.load("/gp/product/features/apparel-main-image/360.html",
d)},g):b.ajaxState(h,"fail")};b.ajaxState(h)&&"fail"!==b.ajaxState(h)||(f.load("/gp/product/features/apparel-main-image/360.html",d),b.ajaxState(h,"sent"))}function I(){return b.isDefined(y.spin360ConfigEnabled)&&y.spin360ConfigEnabled}function M(a){return b.isDefinedAndNotEmpty(y.spin360ColorData[a])?!0:y.spin360ColorEnabled.hasOwnProperty(a)?y.landingAsinColor===y.defaultColor?w():y.spin360ColorEnabled[a]:w()}function w(){return b.isDefined(y.spin360LazyLoadEnabled)&&y.spin360LazyLoadEnabled}function F(){ba&&
(e.time("dppc_duration360",Date.now()-da,y.mediaAsin),l.postTimeMetric("dppc_duration360",Date.now()-da),ba=!1)}var P,y,N,K,T,S,V,U,X,aa,fa,oa=!1,ga=!1,na=0,ma=0,da=0,ka=0,W=!1,ca=!1,L=0,pa,la=!0,ba=!1,C=!0,ra=g.once(function(){h.attachImmersiveViewResizeHandler(r);h.attachImmersiveViewResizeHandler(k);h.attachImmersiveViewResetHandler(F);h.attachTabDeselectHandler("iv360Tab",F)});return function(a,c,f,k){P=this;y=a;N=c;I()&&!w()&&(y.spin360ColorData[y.landingAsinColor]=y.spin360ColorData[y.defaultColor],
y.spin360ColorEnabled[y.landingAsinColor]=y.spin360ColorEnabled[y.defaultColor]);b.isDefined(y.staticImages.icon360)&&d("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",h.addStyleCodeToURL(y.staticImages.icon360,"_FMpng_RI_"));P.render=function(a,c,f,k,p,m){if(a===y.landingAsinColor||y.spin360ColorEnabled.hasOwnProperty(a))return C=!0,I()&&M(a)?(b.isUndefinedOrEmpty(y.spin360ColorData[a])&&(y.spin360ColorData[a]={},H(a)),d("#ivThumbs360").hide(),h.unhideTabHeading("iv360TabHeading")):
h.hideTabHeading("iv360TabHeading"),b.isImmersiveViewEnabled(y,N.getCurrentItem().color)&&I()&&M(a)&&(c===y.maxAlts&&(a=k.find(".item.imageThumbnail"),f=k.find(".item.videoThumbnail"),b.isDefined(f)&&1<f.length?f.last().remove():a.last().remove(),c--),a=k.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),g.declarative.create(a,"button-360-click"),k.append(a),c++,e.count("dppc_display360",y.mediaAsin),l.postCountMetric("dppc_display360")),
c};P.update=function(a){};h.attachTabSelectHandler("iv360Tab",r)}});n.register("nexusLogger360",function(){return{count:function(g,a){m.ue&&m.ue.event({asin:a,metricName:g,metricValue:1},"hit-360","hit360.clientEvent.3")},time:function(g,a,c){m.ue&&m.ue.event({asin:c,metricName:g,metricValue:a},"hit-360","hit360.clientEvent.3")}}});n.when("postMetric","imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",function(g,a){try{var c=m.location.host,d={dub:"https://www.amazon.co.uk/vap/ew/",
pdx:"https://www.amazon.co.jp/vap/ew/"},b=c.split(".")[1],f=-1===c.indexOf(".proxy.amazon.com")?"/vap/ew/":d[b]!==t?d[b]:"https://www.amazon.com/vap/ew/",e="vse_lazyLoaderHook:success:",l="vse_lazyLoaderHook:error:",h="vse_preLoaderHook:success:",k="vse_preLoaderHook:error:",p=4E3,q=3}catch(Y){a.logError("FATAL","vse_ns_desktop","[Domain] ",Y)}n.register("vse_ns_preLoaderHook",function(){function b(c,d){try{var e=c.A,l=c.block,m=c.request,n=c.handleFailure,z=c.handleSuccess,t=e.$;d--;var u=q-d-1,
r=e.now();e.ajax(f+"componentbuilder",{params:m,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:m.timeout||p,withCredentials:!0,success:function(a){var b=e.now()-r;g.postTimeMetric(h,b);g.postCountMetric(h+m.page+":"+m.placement+":"+u);t(l).html(a);z(e,m,a)},error:function(a){g.postCountMetric(k+m.page+":"+m.placement+":"+u);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<d?b(c,d):(g.postCountMetric(k,1),n(e,m,a))}})}catch(H){a.logError("FATAL",
"vse_ns_desktop","[vse_ns_preLoaderHook] ",H)}}return{get:function(a,c,d,e,f){b({A:a,block:c,request:d,handleFailure:f,handleSuccess:e},q)}}});n.register("vse_ns_lazyLoaderHook",function(){function b(c,d,h){try{var k=c.A,m=c.context,n=c.handleFailure,z=c.handleSuccess;d.attr("data-configuration");var t=atob(d.attr("data-configuration")),u=JSON.parse(t),r={pageContext:m,configuration:u},H=k.now();h--;var I=q-h-1;k.ajax(f+"subcomponent/"+u.type,{params:r,paramsFormat:"json",method:"post",contentType:"application/json",
timeout:m.timeout||p,withCredentials:!0,success:function(a){var b=k.now()-H;g.postTimeMetric(e,b);g.postCountMetric(e+m.page+":"+m.placement+":"+u.type+":"+I);d.html(a);z(k,r,a)},error:function(a){g.postCountMetric(l+m.page+":"+m.placement+":"+u.type+":"+I);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<h?b(c,d,h):(g.postCountMetric(l,1),n(k,r,a))}})}catch(M){a.logError("FATAL","vse_ns_desktop","[vse_ns_lazyLoaderHook] ",M)}}return{get:function(a,c,d,e,f){var g=a.$;g(c+" div[data-configuration]").each(function(){b({A:a,
context:d,handleFailure:f,handleSuccess:e},g(this),q)})}}})})});